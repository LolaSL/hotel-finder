{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Salom/Desktop/hotel-finder/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Salom/Desktop/hotel-finder/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"C:/Users/Salom/Desktop/hotel-finder/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/Salom/Desktop/hotel-finder/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Salom/Desktop/hotel-finder/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useContext}from\"react\";import Container from\"react-bootstrap/Container\";import Form from\"react-bootstrap/Form\";import Button from\"react-bootstrap/Button\";import{Link,useLocation,useNavigate}from\"react-router-dom\";import{onRegistration}from\"../apis/auth\";import{Helmet}from\"react-helmet-async\";import{Store}from'../Store';import{toast}from'react-toastify';import{getError}from'../utils';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Register=function Register(){var navigate=useNavigate();var _useLocation=useLocation(),search=_useLocation.search;var redirectInUrl=new URLSearchParams(search).get(\"redirect\");var redirect=redirectInUrl?redirectInUrl:\"/\";var _useState=useState({name:\"\",email:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),values=_useState2[0],setValues=_useState2[1];var _useContext=useContext(Store),state=_useContext.state,ctxDispatch=_useContext.dispatch;var userInfo=state.userInfo;var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),success=_useState6[0],setSuccess=_useState6[1];var _onChange=function onChange(e){setValues(_objectSpread(_objectSpread({},values),{},_defineProperty({},e.target.name,e.target.value)));};var _onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var _yield$onRegistration,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;_context.next=4;return onRegistration(values);case 4:_yield$onRegistration=_context.sent;data=_yield$onRegistration.data;setError(\"\");setSuccess(data.message);setValues({email:\"\",password:\"\"});ctxDispatch({type:'USER_LOGIN',payload:data});localStorage.setItem('userInfo',JSON.stringify(data));navigate(redirect||\"/\");_context.next=18;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](1);toast.error(getError(_context.t0));setSuccess(\"\");case 18:case\"end\":return _context.stop();}},_callee,null,[[1,14]]);}));return function onSubmit(_x){return _ref.apply(this,arguments);};}();useEffect(function(){if(userInfo){navigate();}},[navigate,userInfo]);return/*#__PURE__*/_jsxs(Container,{className:\"small-container\",children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsx(\"title\",{children:\"Registration\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h1\",{className:\"font-weight-light display-1 text-center mt-4\",children:\"Register\"})}),/*#__PURE__*/_jsxs(Form,{onSubmit:function onSubmit(e){return _onSubmit(e);},children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Name\"}),/*#__PURE__*/_jsx(Form.Control,{onChange:function onChange(e){return _onChange(e);},value:values.name,id:\"email\",name:\"name\",placeholder:\"Name\",className:\"form-control\",required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email\"}),/*#__PURE__*/_jsx(Form.Control,{onChange:function onChange(e){return _onChange(e);},type:\"email\",required:true,id:\"email\",name:\"email\",className:\"form-control\",value:values.email,placeholder:\"Email\"})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{onChange:function onChange(e){return _onChange(e);},type:\"password\",value:values.password,placeholder:\"Password\",className:\"form-control\",id:\"password\",name:\"password\",required:true,autoComplete:\"new-password\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{color:\"red\",margin:\"10px 0\"},children:error}),/*#__PURE__*/_jsx(\"div\",{style:{color:\"green\",margin:\"10px 0\"},children:success}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(Button,{type:\"submit\",children:\"Register\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[\"Already have an account?\",\" \",/*#__PURE__*/_jsx(Link,{className:\"link\",to:\"/login?redirect=\".concat(redirect),children:\"Log In\"})]})]})]});};export default Register;","map":{"version":3,"names":["React","useState","useEffect","useContext","Container","Form","Button","Link","useLocation","useNavigate","onRegistration","Helmet","Store","toast","getError","Register","navigate","search","redirectInUrl","URLSearchParams","get","redirect","name","email","password","values","setValues","state","ctxDispatch","dispatch","userInfo","error","setError","success","setSuccess","onChange","e","target","value","onSubmit","preventDefault","data","message","type","payload","localStorage","setItem","JSON","stringify","color","margin"],"sources":["C:/Users/Salom/Desktop/hotel-finder/frontend/src/pages/Register.jsx"],"sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\r\nimport Container from \"react-bootstrap/Container\";\r\nimport Form from \"react-bootstrap/Form\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport { Link, useLocation, useNavigate } from \"react-router-dom\";\r\nimport { onRegistration } from \"../apis/auth\";\r\nimport { Helmet } from \"react-helmet-async\";\r\nimport { Store } from '../Store';\r\nimport { toast } from 'react-toastify';\r\nimport { getError } from '../utils';\r\n\r\n\r\n\r\nconst Register = () => {\r\n  const navigate = useNavigate();\r\n  const { search } = useLocation();\r\n\r\n  const redirectInUrl = new URLSearchParams(search).get(\"redirect\");\r\n  const redirect = redirectInUrl ? redirectInUrl : \"/\";\r\n  const [values, setValues] = useState({\r\n    name: \"\",\r\n    email: \"\",\r\n    password: \"\",\r\n  });\r\n  const { state, dispatch: ctxDispatch } = useContext(Store);\r\n  const { userInfo } = state;\r\n  \r\n  const [error, setError] = useState(false);\r\n  const [success, setSuccess] = useState(false);\r\n\r\n  const onChange = (e) => {\r\n    setValues({ ...values, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const onSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    try {\r\n      const { data } = await onRegistration(values);\r\n      setError(\"\");\r\n      setSuccess(data.message);\r\n      setValues({ email: \"\", password: \"\" });\r\n      ctxDispatch({ type: 'USER_LOGIN', payload: data });\r\n      localStorage.setItem('userInfo', JSON.stringify(data));\r\n      navigate(redirect || \"/\");\r\n    } catch (error) {\r\n      toast.error(getError(error));\r\n      setSuccess(\"\");\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (userInfo) {\r\n      navigate();\r\n    }\r\n  }, [navigate, userInfo]);\r\n  \r\n  return (\r\n    <Container className=\"small-container\">\r\n      <Helmet>\r\n        <title>Registration</title>\r\n      </Helmet>\r\n      <div>\r\n        <h1 className=\"font-weight-light display-1 text-center mt-4\">Register</h1>\r\n      </div>\r\n      <Form onSubmit={(e) => onSubmit(e)}>\r\n        <Form.Group className=\"mb-3\">\r\n          <Form.Label>Name</Form.Label>\r\n          <Form.Control\r\n            onChange={(e) => onChange(e)}\r\n            value={values.name}\r\n            id=\"email\"\r\n            name=\"name\"\r\n            placeholder=\"Name\"\r\n            className=\"form-control\"\r\n            required\r\n          />\r\n        </Form.Group>\r\n\r\n        <Form.Group className=\"mb-3\">\r\n          <Form.Label>Email</Form.Label>\r\n          <Form.Control\r\n            onChange={(e) => onChange(e)}\r\n            type=\"email\"\r\n            required\r\n            id=\"email\"\r\n            name=\"email\"\r\n            className=\"form-control\"\r\n            value={values.email}\r\n            placeholder=\"Email\"\r\n          />\r\n        </Form.Group>\r\n        <Form.Group className=\"mb-3\">\r\n          <Form.Label>Password</Form.Label>\r\n          <Form.Control\r\n            onChange={(e) => onChange(e)}\r\n            type=\"password\"\r\n            value={values.password}\r\n            placeholder=\"Password\"\r\n            className=\"form-control\"\r\n            id=\"password\"\r\n            name=\"password\"\r\n            required\r\n            autoComplete=\"new-password\"\r\n          />\r\n        </Form.Group>\r\n        <div style={{ color: \"red\", margin: \"10px 0\" }}>{error}</div>\r\n        <div style={{ color: \"green\", margin: \"10px 0\" }}>{success}</div>\r\n        <div className=\"mb-3\">\r\n          <Button type=\"submit\">Register</Button>\r\n        </div>\r\n        <div className=\"mb-3\">\r\n          Already have an account?{\" \"}\r\n          <Link className=\"link\" to={`/login?redirect=${redirect}`}>\r\n            Log In\r\n          </Link>\r\n        </div>\r\n      </Form>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Register;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}