{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Salom/Desktop/hotel-finder/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Salom/Desktop/hotel-finder/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"C:/Users/Salom/Desktop/hotel-finder/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/Salom/Desktop/hotel-finder/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Salom/Desktop/hotel-finder/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useEffect,useState}from\"react\";import Container from\"react-bootstrap/Container\";import Form from\"react-bootstrap/Form\";import Button from\"react-bootstrap/Button\";import{Link,useLocation,useNavigate}from\"react-router-dom\";import{onLogin}from\"../apis/auth\";import{useDispatch}from\"react-redux\";import{authenticateUser}from\"../redux/slices/authSlice\";import{Helmet}from\"react-helmet-async\";import{Store}from\"../Store\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var navigate=useNavigate();var _useLocation=useLocation(),search=_useLocation.search;var redirectInUrl=new URLSearchParams(search).get(\"redirect\");var redirect=redirectInUrl?redirectInUrl:\"/\";var _useState=useState({email:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),values=_useState2[0],setValues=_useState2[1];var _useContext=useContext(Store),state=_useContext.state,ctxDispatch=_useContext.dispatch;var userInfo=state.userInfo;var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _onChange=function onChange(e){setValues(_objectSpread(_objectSpread({},values),{},_defineProperty({},e.target.name,e.target.value)));};var dispatch=useDispatch();var _onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var _yield$onLogin,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;_context.next=4;return onLogin(values);case 4:_yield$onLogin=_context.sent;data=_yield$onLogin.data;dispatch(authenticateUser());localStorage.setItem(\"isAuth\",\"true\");ctxDispatch({type:\"USER_LOGIN\",payload:data});localStorage.setItem(\"userInfo\",JSON.stringify(data));navigate(redirect||\"/\");_context.next=17;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](1);console.log(_context.t0.response.data.errors[0].msg);setError(_context.t0.response.data.errors[0].msg);case 17:case\"end\":return _context.stop();}},_callee,null,[[1,13]]);}));return function onSubmit(_x){return _ref.apply(this,arguments);};}();useEffect(function(){if(userInfo){navigate();}},[navigate,userInfo]);return/*#__PURE__*/_jsxs(Container,{className:\"small-container\",children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsx(\"title\",{children:\"Log In\"})}),/*#__PURE__*/_jsx(\"h1\",{className:\"font-weight-light display-1 text-center mt-4\",children:\"Log In\"}),/*#__PURE__*/_jsxs(Form,{onSubmit:function onSubmit(e){return _onSubmit(e);},children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email\"}),/*#__PURE__*/_jsx(Form.Control,{onChange:function onChange(e){return _onChange(e);},type:\"email\",className:\"form-control\",id:\"email\",name:\"email\",value:values.email,placeholder:\"email\",required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{onChange:function onChange(e){return _onChange(e);},type:\"password\",value:values.password,className:\"form-control\",id:\"password\",name:\"password\",placeholder:\"password\",required:true,autoComplete:\"current-password\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{color:\"red\",margin:\"10px 0\"},children:error}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(Button,{type:\"submit\",children:\"Login\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[\"New User?\",\" \",/*#__PURE__*/_jsx(Link,{className:\"link\",to:\"/register?redirect=\".concat(redirect),children:\"Create your account\"})]})]})]});};export default Login;","map":{"version":3,"names":["React","useContext","useEffect","useState","Container","Form","Button","Link","useLocation","useNavigate","onLogin","useDispatch","authenticateUser","Helmet","Store","Login","navigate","search","redirectInUrl","URLSearchParams","get","redirect","email","password","values","setValues","state","ctxDispatch","dispatch","userInfo","error","setError","onChange","e","target","name","value","onSubmit","preventDefault","data","localStorage","setItem","type","payload","JSON","stringify","console","log","response","errors","msg","color","margin"],"sources":["C:/Users/Salom/Desktop/hotel-finder/frontend/src/pages/Login.jsx"],"sourcesContent":["import React, {  useContext, useEffect, useState } from \"react\";\r\nimport Container from \"react-bootstrap/Container\";\r\nimport Form from \"react-bootstrap/Form\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport { Link, useLocation, useNavigate } from \"react-router-dom\";\r\nimport { onLogin } from \"../apis/auth\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { authenticateUser } from \"../redux/slices/authSlice\";\r\nimport { Helmet } from \"react-helmet-async\";\r\nimport { Store } from \"../Store\";\r\n\r\n\r\n\r\nconst Login = () => {\r\n  const navigate = useNavigate();\r\n  const { search } = useLocation();\r\n\r\n  const redirectInUrl = new URLSearchParams(search).get(\"redirect\");\r\n  const redirect = redirectInUrl ? redirectInUrl : \"/\";\r\n\r\n  const [values, setValues] = useState({\r\n    email: \"\",\r\n    password: \"\",\r\n  });\r\n\r\n  const { state, dispatch: ctxDispatch } = useContext(Store);\r\n  const { userInfo } = state;\r\n\r\n  const [error, setError] = useState(false);\r\n\r\n  const onChange = (e) => {\r\n    setValues({ ...values, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const onSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const { data } = await onLogin(values);\r\n      dispatch(authenticateUser());\r\n      localStorage.setItem(\"isAuth\", \"true\");\r\n      ctxDispatch({ type: \"USER_LOGIN\", payload: data });\r\n      localStorage.setItem(\"userInfo\", JSON.stringify(data));\r\n      navigate(redirect || \"/\");\r\n    } catch (error) {\r\n      console.log(error.response.data.errors[0].msg);\r\n      setError(error.response.data.errors[0].msg);\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    if (userInfo) {\r\n      navigate();\r\n    }\r\n  }, [navigate, userInfo]);\r\n  return (\r\n    <Container className=\"small-container\">\r\n     <Helmet>\r\n        <title>Log In</title>\r\n      </Helmet>\r\n      <h1 className=\"font-weight-light display-1 text-center mt-4\">Log In</h1>\r\n      <Form onSubmit={(e) => onSubmit(e)}>\r\n        <Form.Group className=\"mb-3\">\r\n          <Form.Label>Email</Form.Label>\r\n          <Form.Control\r\n         onChange={(e) => onChange(e)}\r\n         type='email'\r\n         className='form-control'\r\n         id='email'\r\n         name='email'\r\n         value={values.email}\r\n         placeholder='email'\r\n         required\r\n          />\r\n        </Form.Group>\r\n        <Form.Group className=\"mb-3\">\r\n          <Form.Label>Password</Form.Label>\r\n          <Form.Control\r\n      onChange={(e) => onChange(e)}\r\n      type='password'\r\n      value={values.password}\r\n      className='form-control'\r\n      id='password'\r\n      name='password'\r\n      placeholder='password'\r\n      required\r\n            autoComplete=\"current-password\"\r\n          />\r\n        </Form.Group>\r\n        <div style={{ color: \"red\", margin: \"10px 0\" }}>{error}</div>\r\n        <div className=\"mb-3\">\r\n          <Button type=\"submit\">Login</Button>\r\n        </div>\r\n        <div className=\"mb-3\">\r\n          New User?{\" \"}\r\n          <Link className=\"link\" to={`/register?redirect=${redirect}`}>Create your account</Link>\r\n        </div>\r\n      </Form>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"mappings":"2pBAAA,MAAOA,MAAK,EAAKC,UAAU,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC/D,MAAOC,UAAS,KAAM,2BAA2B,CACjD,MAAOC,KAAI,KAAM,sBAAsB,CACvC,MAAOC,OAAM,KAAM,wBAAwB,CAC3C,OAASC,IAAI,CAAEC,WAAW,CAAEC,WAAW,KAAQ,kBAAkB,CACjE,OAASC,OAAO,KAAQ,cAAc,CACtC,OAASC,WAAW,KAAQ,aAAa,CACzC,OAASC,gBAAgB,KAAQ,2BAA2B,CAC5D,OAASC,MAAM,KAAQ,oBAAoB,CAC3C,OAASC,KAAK,KAAQ,UAAU,CAAC,wFAIjC,GAAMC,MAAK,CAAG,QAARA,MAAK,EAAS,CAClB,GAAMC,SAAQ,CAAGP,WAAW,EAAE,CAC9B,iBAAmBD,WAAW,EAAE,CAAxBS,MAAM,cAANA,MAAM,CAEd,GAAMC,cAAa,CAAG,GAAIC,gBAAe,CAACF,MAAM,CAAC,CAACG,GAAG,CAAC,UAAU,CAAC,CACjE,GAAMC,SAAQ,CAAGH,aAAa,CAAGA,aAAa,CAAG,GAAG,CAEpD,cAA4Bf,QAAQ,CAAC,CACnCmB,KAAK,CAAE,EAAE,CACTC,QAAQ,CAAE,EACZ,CAAC,CAAC,wCAHKC,MAAM,eAAEC,SAAS,eAKxB,gBAAyCxB,UAAU,CAACa,KAAK,CAAC,CAAlDY,KAAK,aAALA,KAAK,CAAYC,WAAW,aAArBC,QAAQ,CACvB,GAAQC,SAAQ,CAAKH,KAAK,CAAlBG,QAAQ,CAEhB,eAA0B1B,QAAQ,CAAC,KAAK,CAAC,yCAAlC2B,KAAK,eAAEC,QAAQ,eAEtB,GAAMC,UAAQ,CAAG,QAAXA,SAAQ,CAAIC,CAAC,CAAK,CACtBR,SAAS,gCAAMD,MAAM,wBAAGS,CAAC,CAACC,MAAM,CAACC,IAAI,CAAGF,CAAC,CAACC,MAAM,CAACE,KAAK,GAAG,CAC3D,CAAC,CAED,GAAMR,SAAQ,CAAGjB,WAAW,EAAE,CAE9B,GAAM0B,UAAQ,4FAAG,iBAAOJ,CAAC,2IACvBA,CAAC,CAACK,cAAc,EAAE,CAAC,sCAEM5B,QAAO,CAACc,MAAM,CAAC,qCAA9Be,IAAI,gBAAJA,IAAI,CACZX,QAAQ,CAAChB,gBAAgB,EAAE,CAAC,CAC5B4B,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAE,MAAM,CAAC,CACtCd,WAAW,CAAC,CAAEe,IAAI,CAAE,YAAY,CAAEC,OAAO,CAAEJ,IAAK,CAAC,CAAC,CAClDC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAEG,IAAI,CAACC,SAAS,CAACN,IAAI,CAAC,CAAC,CACtDvB,QAAQ,CAACK,QAAQ,EAAI,GAAG,CAAC,CAAC,iFAE1ByB,OAAO,CAACC,GAAG,CAAC,YAAMC,QAAQ,CAACT,IAAI,CAACU,MAAM,CAAC,CAAC,CAAC,CAACC,GAAG,CAAC,CAC9CnB,QAAQ,CAAC,YAAMiB,QAAQ,CAACT,IAAI,CAACU,MAAM,CAAC,CAAC,CAAC,CAACC,GAAG,CAAC,CAAC,oEAE/C,kBAbKb,SAAQ,4CAab,CACDnC,SAAS,CAAC,UAAM,CACd,GAAI2B,QAAQ,CAAE,CACZb,QAAQ,EAAE,CACZ,CACF,CAAC,CAAE,CAACA,QAAQ,CAAEa,QAAQ,CAAC,CAAC,CACxB,mBACE,MAAC,SAAS,EAAC,SAAS,CAAC,iBAAiB,wBACrC,KAAC,MAAM,wBACJ,uBAAO,QAAM,EAAQ,EACd,cACT,WAAI,SAAS,CAAC,8CAA8C,UAAC,QAAM,EAAK,cACxE,MAAC,IAAI,EAAC,QAAQ,CAAE,kBAACI,CAAC,QAAKI,UAAQ,CAACJ,CAAC,CAAC,EAAC,wBACjC,MAAC,IAAI,CAAC,KAAK,EAAC,SAAS,CAAC,MAAM,wBAC1B,KAAC,IAAI,CAAC,KAAK,WAAC,OAAK,EAAa,cAC9B,KAAC,IAAI,CAAC,OAAO,EACd,QAAQ,CAAE,kBAACA,CAAC,QAAKD,UAAQ,CAACC,CAAC,CAAC,EAAC,CAC7B,IAAI,CAAC,OAAO,CACZ,SAAS,CAAC,cAAc,CACxB,EAAE,CAAC,OAAO,CACV,IAAI,CAAC,OAAO,CACZ,KAAK,CAAET,MAAM,CAACF,KAAM,CACpB,WAAW,CAAC,OAAO,CACnB,QAAQ,OACL,GACS,cACb,MAAC,IAAI,CAAC,KAAK,EAAC,SAAS,CAAC,MAAM,wBAC1B,KAAC,IAAI,CAAC,KAAK,WAAC,UAAQ,EAAa,cACjC,KAAC,IAAI,CAAC,OAAO,EACjB,QAAQ,CAAE,kBAACW,CAAC,QAAKD,UAAQ,CAACC,CAAC,CAAC,EAAC,CAC7B,IAAI,CAAC,UAAU,CACf,KAAK,CAAET,MAAM,CAACD,QAAS,CACvB,SAAS,CAAC,cAAc,CACxB,EAAE,CAAC,UAAU,CACb,IAAI,CAAC,UAAU,CACf,WAAW,CAAC,UAAU,CACtB,QAAQ,MACF,YAAY,CAAC,kBAAkB,EAC/B,GACS,cACb,YAAK,KAAK,CAAE,CAAE4B,KAAK,CAAE,KAAK,CAAEC,MAAM,CAAE,QAAS,CAAE,UAAEtB,KAAK,EAAO,cAC7D,YAAK,SAAS,CAAC,MAAM,uBACnB,KAAC,MAAM,EAAC,IAAI,CAAC,QAAQ,UAAC,OAAK,EAAS,EAChC,cACN,aAAK,SAAS,CAAC,MAAM,WAAC,WACX,CAAC,GAAG,cACb,KAAC,IAAI,EAAC,SAAS,CAAC,MAAM,CAAC,EAAE,8BAAwBT,QAAQ,CAAG,UAAC,qBAAmB,EAAO,GACnF,GACD,GACG,CAEhB,CAAC,CAED,cAAeN,MAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}