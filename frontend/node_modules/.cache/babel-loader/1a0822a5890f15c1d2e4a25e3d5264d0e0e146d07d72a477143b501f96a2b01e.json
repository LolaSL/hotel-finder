{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Salom/Desktop/hotel-finder/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Salom/Desktop/hotel-finder/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{useEffect,useContext}from\"react\";import HotelFinder from\"../apis/HotelFinder\";import{HotelsContext}from\"../context/HotelsContext\";import{useNavigate}from\"react-router-dom\";import StarRating from\"./StarRating\";import Button from\"react-bootstrap/Button\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var HotelList=function HotelList(props){var _useContext=useContext(HotelsContext),hotels=_useContext.hotels,setHotels=_useContext.setHotels;var navigate=useNavigate();useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return HotelFinder.get(\"/\");case 3:response=_context.sent;console.log(response.data.data);setHotels(response.data.data.hotels);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 11:case\"end\":return _context.stop();}},_callee,null,[[0,8]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[setHotels]);var handleDelete=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e,id){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:e.stopPropagation();_context2.prev=1;_context2.next=4;return HotelFinder.delete(\"/\".concat(id));case 4:response=_context2.sent;setHotels(hotels.filter(function(hotel){return hotel.id!==id;}));console.log(response.data.data);_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](1);console.log(_context2.t0);case 12:case\"end\":return _context2.stop();}},_callee2,null,[[1,9]]);}));return function handleDelete(_x,_x2){return _ref2.apply(this,arguments);};}();var handleUpdate=function handleUpdate(e,id){e.stopPropagation();navigate(\"/hotels/\".concat(id,\"/update\"));};var handleHotelSelect=function handleHotelSelect(id){navigate(\"/hotels/\".concat(id));};var renderRating=function renderRating(hotel){if(!hotel.count){return/*#__PURE__*/_jsx(\"span\",{className:\"count\",children:\"0 reviews\"});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(StarRating,{rating:hotel.average_rating}),/*#__PURE__*/_jsxs(\"span\",{className:\"count ml-1\",children:[\"(\",hotel.count,\")\"]})]});};return/*#__PURE__*/_jsxs(\"table\",{className:\"table table-hover text-white border \",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\" table\",children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Hotel\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Location\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Price Range\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Ratings\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Edit\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Delete\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:hotels&&hotels.map(function(hotel,index){return/*#__PURE__*/_jsxs(\"tr\",{onClick:function onClick(){return handleHotelSelect(hotel.id);},\"data-testid\":\"row\",children:[/*#__PURE__*/_jsx(\"td\",{children:hotel.name}),/*#__PURE__*/_jsx(\"td\",{children:hotel.location}),/*#__PURE__*/_jsx(\"td\",{children:\"$\".repeat(hotel.price_range)}),/*#__PURE__*/_jsx(\"td\",{children:renderRating(hotel)}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Button,{onClick:function onClick(e){return handleUpdate(e,hotel.id);},className:\"btn btn-warning\",size:\"sm\",children:\"Update\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Button,{onClick:function onClick(e){return handleDelete(e,hotel.id);},className:\"btn btn-danger\",size:\"sm\",children:\"Delete\"})})]},index);})})]});};export default HotelList;","map":{"version":3,"names":["React","useEffect","useContext","HotelFinder","HotelsContext","useNavigate","StarRating","Button","HotelList","props","hotels","setHotels","navigate","fetchData","get","response","console","log","data","handleDelete","e","id","stopPropagation","delete","filter","hotel","handleUpdate","handleHotelSelect","renderRating","count","average_rating","map","index","name","location","repeat","price_range"],"sources":["C:/Users/Salom/Desktop/hotel-finder/frontend/src/components/HotelList.jsx"],"sourcesContent":["import React, { useEffect, useContext } from \"react\";\r\nimport HotelFinder from \"../apis/HotelFinder\";\r\nimport { HotelsContext } from \"../context/HotelsContext\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport StarRating from \"./StarRating\";\r\nimport Button from \"react-bootstrap/Button\";\r\n\r\nconst HotelList = (props) => {\r\n  const { hotels, setHotels } = useContext(HotelsContext);\r\n  let navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const response = await HotelFinder.get(\"/\");\r\n        console.log(response.data.data);\r\n        setHotels(response.data.data.hotels);\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, [setHotels]);\r\n\r\n  const handleDelete = async (e, id) => {\r\n    e.stopPropagation();\r\n    try {\r\n      const response = await HotelFinder.delete(`/${id}`);\r\n      setHotels(\r\n        hotels.filter((hotel) => {\r\n          return hotel.id !== id;\r\n        })\r\n      );\r\n      console.log(response.data.data);\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  const handleUpdate = (e, id) => {\r\n    e.stopPropagation();\r\n    navigate(`/hotels/${id}/update`);\r\n  };\r\n\r\n  const handleHotelSelect = (id) => {\r\n    navigate(`/hotels/${id}`);\r\n  };\r\n\r\n  const renderRating = (hotel) => {\r\n    if (!hotel.count) {\r\n      return <span className=\"count\">0 reviews</span>;\r\n    }\r\n    return (\r\n      <>\r\n        <StarRating rating={hotel.average_rating} />\r\n        <span className=\"count ml-1\">({hotel.count})</span>\r\n      </>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <table className=\"table table-hover text-white border \">\r\n      <thead>\r\n        <tr className=\" table\">\r\n          <th scope=\"col\">Hotel</th>\r\n          <th scope=\"col\">Location</th>\r\n          <th scope=\"col\">Price Range</th>\r\n          <th scope=\"col\">Ratings</th>\r\n          <th scope=\"col\">Edit</th>\r\n          <th scope=\"col\">Delete</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {hotels &&\r\n          hotels.map((hotel, index) => {\r\n            return (\r\n              <tr onClick={() => handleHotelSelect(hotel.id)} key={index} data-testid=\"row\">\r\n                <td>{hotel.name}</td>\r\n                <td>{hotel.location}</td>\r\n                <td>{\"$\".repeat(hotel.price_range)}</td>\r\n                <td>{renderRating(hotel)}</td>\r\n                <td>\r\n                  <Button\r\n                    onClick={(e) => handleUpdate(e, hotel.id)}\r\n                    className=\"btn btn-warning\"\r\n                    size=\"sm\"\r\n                  >\r\n                    Update\r\n                  </Button>\r\n                </td>\r\n                <td>\r\n                  <Button\r\n                    onClick={(e) => handleDelete(e, hotel.id)}\r\n                    className=\"btn btn-danger\"\r\n                    size=\"sm\"\r\n                  >\r\n                    Delete\r\n                  </Button>\r\n                </td>\r\n              </tr>\r\n            );\r\n          })}\r\n      </tbody>\r\n    </table>\r\n  );\r\n};\r\n\r\nexport default HotelList;\r\n"],"mappings":"oRAAA,MAAOA,MAAK,EAAIC,SAAS,CAAEC,UAAU,KAAQ,OAAO,CACpD,MAAOC,YAAW,KAAM,qBAAqB,CAC7C,OAASC,aAAa,KAAQ,0BAA0B,CACxD,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAOC,WAAU,KAAM,cAAc,CACrC,MAAOC,OAAM,KAAM,wBAAwB,CAAC,6IAE5C,GAAMC,UAAS,CAAG,QAAZA,UAAS,CAAIC,KAAK,CAAK,CAC3B,gBAA8BP,UAAU,CAACE,aAAa,CAAC,CAA/CM,MAAM,aAANA,MAAM,CAAEC,SAAS,aAATA,SAAS,CACzB,GAAIC,SAAQ,CAAGP,WAAW,EAAE,CAE5BJ,SAAS,CAAC,UAAM,CACd,GAAMY,UAAS,4FAAG,uLAESV,YAAW,CAACW,GAAG,CAAC,GAAG,CAAC,QAArCC,QAAQ,eACdC,OAAO,CAACC,GAAG,CAACF,QAAQ,CAACG,IAAI,CAACA,IAAI,CAAC,CAC/BP,SAAS,CAACI,QAAQ,CAACG,IAAI,CAACA,IAAI,CAACR,MAAM,CAAC,CAAC,+EAErCM,OAAO,CAACC,GAAG,aAAK,CAAC,mEAEpB,kBARKJ,UAAS,0CAQd,CAEDA,SAAS,EAAE,CACb,CAAC,CAAE,CAACF,SAAS,CAAC,CAAC,CAEf,GAAMQ,aAAY,6FAAG,kBAAOC,CAAC,CAAEC,EAAE,oIAC/BD,CAAC,CAACE,eAAe,EAAE,CAAC,wCAEKnB,YAAW,CAACoB,MAAM,YAAKF,EAAE,EAAG,QAA7CN,QAAQ,gBACdJ,SAAS,CACPD,MAAM,CAACc,MAAM,CAAC,SAACC,KAAK,CAAK,CACvB,MAAOA,MAAK,CAACJ,EAAE,GAAKA,EAAE,CACxB,CAAC,CAAC,CACH,CACDL,OAAO,CAACC,GAAG,CAACF,QAAQ,CAACG,IAAI,CAACA,IAAI,CAAC,CAAC,mFAEhCF,OAAO,CAACC,GAAG,cAAK,CAAC,qEAEpB,kBAbKE,aAAY,iDAajB,CAED,GAAMO,aAAY,CAAG,QAAfA,aAAY,CAAIN,CAAC,CAAEC,EAAE,CAAK,CAC9BD,CAAC,CAACE,eAAe,EAAE,CACnBV,QAAQ,mBAAYS,EAAE,YAAU,CAClC,CAAC,CAED,GAAMM,kBAAiB,CAAG,QAApBA,kBAAiB,CAAIN,EAAE,CAAK,CAChCT,QAAQ,mBAAYS,EAAE,EAAG,CAC3B,CAAC,CAED,GAAMO,aAAY,CAAG,QAAfA,aAAY,CAAIH,KAAK,CAAK,CAC9B,GAAI,CAACA,KAAK,CAACI,KAAK,CAAE,CAChB,mBAAO,aAAM,SAAS,CAAC,OAAO,UAAC,WAAS,EAAO,CACjD,CACA,mBACE,wCACE,KAAC,UAAU,EAAC,MAAM,CAAEJ,KAAK,CAACK,cAAe,EAAG,cAC5C,cAAM,SAAS,CAAC,YAAY,WAAC,GAAC,CAACL,KAAK,CAACI,KAAK,CAAC,GAAC,GAAO,GAClD,CAEP,CAAC,CAED,mBACE,eAAO,SAAS,CAAC,sCAAsC,wBACrD,oCACE,YAAI,SAAS,CAAC,QAAQ,wBACpB,WAAI,KAAK,CAAC,KAAK,UAAC,OAAK,EAAK,cAC1B,WAAI,KAAK,CAAC,KAAK,UAAC,UAAQ,EAAK,cAC7B,WAAI,KAAK,CAAC,KAAK,UAAC,aAAW,EAAK,cAChC,WAAI,KAAK,CAAC,KAAK,UAAC,SAAO,EAAK,cAC5B,WAAI,KAAK,CAAC,KAAK,UAAC,MAAI,EAAK,cACzB,WAAI,KAAK,CAAC,KAAK,UAAC,QAAM,EAAK,GACxB,EACC,cACR,uBACGnB,MAAM,EACLA,MAAM,CAACqB,GAAG,CAAC,SAACN,KAAK,CAAEO,KAAK,CAAK,CAC3B,mBACE,YAAI,OAAO,CAAE,yBAAML,kBAAiB,CAACF,KAAK,CAACJ,EAAE,CAAC,EAAC,CAAa,cAAY,KAAK,wBAC3E,oBAAKI,KAAK,CAACQ,IAAI,EAAM,cACrB,oBAAKR,KAAK,CAACS,QAAQ,EAAM,cACzB,oBAAK,GAAG,CAACC,MAAM,CAACV,KAAK,CAACW,WAAW,CAAC,EAAM,cACxC,oBAAKR,YAAY,CAACH,KAAK,CAAC,EAAM,cAC9B,iCACE,KAAC,MAAM,EACL,OAAO,CAAE,iBAACL,CAAC,QAAKM,aAAY,CAACN,CAAC,CAAEK,KAAK,CAACJ,EAAE,CAAC,EAAC,CAC1C,SAAS,CAAC,iBAAiB,CAC3B,IAAI,CAAC,IAAI,UACV,QAED,EAAS,EACN,cACL,iCACE,KAAC,MAAM,EACL,OAAO,CAAE,iBAACD,CAAC,QAAKD,aAAY,CAACC,CAAC,CAAEK,KAAK,CAACJ,EAAE,CAAC,EAAC,CAC1C,SAAS,CAAC,gBAAgB,CAC1B,IAAI,CAAC,IAAI,UACV,QAED,EAAS,EACN,GAtB8CW,KAAK,CAuBrD,CAET,CAAC,CAAC,EACE,GACF,CAEZ,CAAC,CAED,cAAexB,UAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}